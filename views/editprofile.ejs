<%- include('./Partials/header')%>
    <!--  -->
    <%- include('./Partials/nav')%>
        <!--  -->

        <div class="ProfilePage">
            <h1>Edit profile</h1>
            <div class="editprofileform mt-4">
                <form action="/profileimage" class="mb-4" method="post" enctype="multipart/form-data">
                    <img height="100" width="100" class="previewImg me-3 rounded-circle" src="/assets/<%= user.avatar%>"
                        alt="">
                    <input type="file" name="avatar" class="uploadfile">
                    <input type="hidden" name="oldavatar" value="<%= user.avatar%>">
                    <button class="btn btn-danger">Upload image</button>
                </form>
                <!--  -->
                <form action="/userinfo" method="post" class="w-50">
                    <div class="row">
                        <div class="col">
                            <input type="text" name="firstname" class="form-control" placeholder="First name"
                                aria-label="First name" value="<%= user.firstname%>">
                        </div>
                        <div class="col">
                            <input type="text" name="lastname" class="form-control" placeholder="Last name"
                                aria-label="Last name" value="<%= user.lastname%>">
                        </div>
                    </div>
                    <div class="mb-4 mt-4">
                        <input type="text" name="username" placeholder="username" class="form-control"
                            value="<%= user.username%>">
                    </div>
                    <div class="mb-4 mt-4">
                        <input type="email" name="email" placeholder="Email address" class="form-control"
                            id="exampleInputEmail1" aria-describedby="emailHelp" value="<%= user.email%>">
                    </div>
                    <div class="mb-4 mt-4">
                        <input class="form-control" type="text" placeholder="City" name="city"
                            value="<%= user.city%>" />
                    </div>
                    <h6>Gender:</h6>
                    <div class="row ps-4 mb-4">
                        <div class="profile-gender">
                            <input <%= user.gender === 'male' ? 'checked' : '' %> type="radio"
                            name="gender" value="male" /> Male <input <%= user.gender === 'female' ? 'checked' : '' %>
                            type="radio" name="gender" value="female" /> Female
                        </div>
                    </div>
                    <div class="mb-4 mt-4">
                        <input class="form-control" type="text" placeholder="write about yourself..." name="about"
                            value="<%= user.about%>" />
                    </div>
                    <div class="mb-4 mt-4">
                        <input type="number" class="form-control" placeholder="contact" name="phone"
                            value="<%= user.phone%>" />
                    </div>
                    <button type="submit" class="btn btn-primary">Update profile</button>
                </form>
            </div>
            <!-- delete account -->
            <div class="delete-account mt-4 mb-3">
                <a class="text-danger" href="/delete-account">Delete account</a>
            </div>
            <!-- reset password -->
            <div class="reset-password mb-3">
                <a class="text-danger " href="/reset-password">Reset password</a>
            </div>
            <!-- reset password -->
            <div class="signout-user mb-3">
                <a class="text-danger" href="/signout">Logout</a>
            </div>
        </div>

        <!--  -->
        <%- include('./Partials/footer')%>

            <script>
                const uploadfile = document.querySelector(".uploadfile");
                const preview = document.querySelector(".previewImg");

                uploadfile.addEventListener('change', function (e) {
                    preview.src = URL.createObjectURL(e.target.files[0]);
                });
            </script>